"use strict";(self.webpackChunkweb_components_toolbox_storybook=self.webpackChunkweb_components_toolbox_storybook||[]).push([[1393],{"./src/web-components-toolbox/src/es/components/organisms/modal/Modal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Modal});var _prototypes_Shadow_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/web-components-toolbox/src/es/components/prototypes/Shadow.js"),importMeta={url:new URL("./src/web-components-toolbox/src/es/components/organisms/modal/Modal.js",document.baseURI).href};class Modal extends((0,_prototypes_Shadow_js__WEBPACK_IMPORTED_MODULE_0__.j)()){static get observedAttributes(){return["open"]}constructor(){super(...arguments),this.setAttribute("role","dialog"),this.setAttribute("aria-expanded","false"),this.open=!1,this.clone=null,this.eventDetail=null,this.openModalListener=event=>{if(event&&event.detail&&event.detail.forceOpen&&this.hasAttribute("no-mobile")&&(this.setAttribute("had-no-mobile",""),this.removeAttribute("no-mobile")),!this.open&&(!this.hasAttribute("no-mobile")||this.checkMedia("desktop"))){var child,actionAtLast=()=>{};if(this.open=!0,this.eventDetail=event.detail,event&&"function"==typeof event.stopImmediatePropagation&&event.stopImmediatePropagation(),!this.clone&&event&&event.detail&&(child=event.detail.child)&&child instanceof HTMLElement){var parentChild,closeBtn;if(child.hasAttribute("open-modal-target")&&child.parentNode&&(parentChild=child.parentNode.querySelector(child.getAttribute("open-modal-target")))){parentChild.hasAttribute("hidden")&&(parentChild.removeAttribute("hidden"),parentChild.setAttribute("was-hidden","true"));var carouselTwo="M-CAROUSEL-TWO"===parentChild.tagName?parentChild:parentChild.querySelector("m-carousel-two");if(carouselTwo){this.eventDetail.btnCloseOnly=!0;var selector='[alt="'.concat(child.getAttribute("alt"),'"], [defaultSource*="').concat((child.getAttribute("defaultSource")||"").replace(/.*\/(.*)/,"$1"),'"]');actionAtLast=()=>carouselTwo.scrollIntoView(selector,!1,!0)}child=parentChild}if(event.detail.child.root&&(closeBtn=event.detail.child.root.querySelector(".close-btn"))&&(this.style.textContent="",this.setCss("\n              :host([open]) > section > div > #close.close-btn {\n                background-color: ".concat(self.getComputedStyle(closeBtn).getPropertyValue("background-color"),";\n              }\n            "),void 0,void 0,!0,this.style)),!1===event.detail.showOriginal)this.clone=child.cloneNode(!0),this.container.appendChild(this.clone);else{var height=child.offsetHeight;child.replaceWith(this.clone=document.createElement("div")),this.container.appendChild(child),this.clone.style.height="".concat(height,"px"),this.clone.style.visibility="hidden",child.hasAttribute("was-hidden")&&(this.clone.style.display="none"),this.container.querySelectorAll("a-picture").forEach((aPicture=>{aPicture.root&&aPicture.img&&aPicture.img.setAttribute("style","transform: none; height: auto; width: max-content;")}))}}else this.container.appendChild(this.initialContent);this.origChild=child,this.closeBtn&&this.container.appendChild(this.closeBtn),this.hasAttribute("open")||(this.setAttribute("open",""),this.clone.setAttribute("open",""),child.setAttribute("open",""),this.setAttribute("aria-expanded","true")),this.eventDetail&&"function"==typeof this.eventDetail.openFunc&&this.eventDetail.openFunc(),actionAtLast()}},this.anyCloseModalListener=event=>{this.eventDetail&&!this.eventDetail.btnCloseOnly&&this.closeModalListener(event)},this.closeModalListener=event=>{if(this.open){this.hasAttribute("had-no-mobile")&&(this.setAttribute("no-mobile",""),this.removeAttribute("had-no-mobile")),this.open=!1;var duration=self.getComputedStyle(this).getPropertyValue("--".concat(this.namespace||"","transition"));duration=duration?1e3*Number(duration.replace(/.*?\s([\d.]*)s/g,"$1")):300,this.section.animate({opacity:"0"},{duration}).onfinish=()=>{var child;this.closeBtn&&this.appendChild(this.closeBtn),this.clone&&(child=this.container.childNodes[0])&&this.clone!==child&&(this.clone.replaceWith(child),"A-PICTURE"===child.tagName&&child.root&&child.img&&child.img.removeAttribute("style")),child.hasAttribute("was-hidden")&&(child.removeAttribute("was-hidden"),child.setAttribute("hidden","true")),this.hasAttribute("open")&&(this.removeAttribute("open"),this.clone.removeAttribute("open"),child.removeAttribute("open",""),this.origChild.removeAttribute("open",""),this.setAttribute("aria-expanded","false")),this.clone=null,this.container.innerHTML="","function"==typeof this.eventDetail.closeFunc&&this.eventDetail.closeFunc()}}},this.clickListener=event=>event.stopPropagation(),this.resizeListener=event=>{this.hasAttribute("no-mobile")&&this.checkMedia("mobile")&&this.closeModalListener()},this.keyupListener=event=>{"Escape"===event.key&&this.closeModalListener()}}connectedCallback(){this.shouldComponentRenderCSS()&&this.renderCSS(),this.shouldComponentRenderHTML()&&this.renderHTML(),(this.getAttribute("listen-at")?document.querySelector(this.getAttribute("listen-at")):document.body).addEventListener(this.getAttribute("open-modal")||"open-modal",this.openModalListener),this.addEventListener("click",this.clickListener),this.addEventListener("click",this.anyCloseModalListener),this.closeBtn&&this.closeBtn.addEventListener("click",this.closeModalListener),self.addEventListener("resize",this.resizeListener),document.addEventListener("keyup",this.keyupListener)}disconnectedCallback(){(this.getAttribute("listen-at")?document.querySelector(this.getAttribute("listen-at")):document.body).removeEventListener(this.getAttribute("open-modal")||"open-modal",this.openModalListener),this.removeEventListener("click",this.clickListener),this.removeEventListener("click",this.anyCloseModalListener),this.closeBtn&&this.closeBtn.removeEventListener("click",this.closeModalListener),self.removeEventListener("resize",this.resizeListener),document.removeEventListener("keyup",this.keyupListener)}attributeChangedCallback(name,oldValue,newValue){"open"===name&&(this.hasAttribute("open")?(this.scrollY=self.scrollY,this.openModalListener()):(self.scrollTo(0,this.scrollY||0),this.closeModalListener()))}shouldComponentRenderCSS(){return!this.root.querySelector(":host > style[_css], ".concat(this.tagName," > style[_css]"))}shouldComponentRenderHTML(){return!this.section}renderCSS(){if(this.css="\n      :host > section {\n        height: 0;\n        opacity: 0;\n        overscroll-behavior: contain;\n        width: 0;\n      }\n      :host([open]) > section {\n        align-items: center;\n        background-color: var(--background-color, rgba(0, 0, 0, 0.85));\n        box-sizing: border-box;\n        display: flex;\n        height: var(--height, 100%);\n        justify-content: center;\n        opacity: 1;\n        padding: var(--padding, min(var(--content-spacing), 4vw));\n        position: var(--position, fixed);\n        top: var(--top, 0);\n        transition: var(--transition, opacity .3s);\n        width: var(--width, 100%);\n        z-index: var(--z-index, 9999);\n      }\n      :host([open]) > section > div {\n        align-items: var(--align-items, end);\n        display: var(--display, flex);\n        flex-direction: var(--flex-direction, column-reverse);\n        justify-content: var(--justify-content, center);\n      }\n      :host([open]) > section > div > #close {\n        display: var(--close-display, block);\n        position: var(--close-position, static);\n        top: var(--close-top, auto);\n        right: var(--close-right, auto);\n        bottom: var(--close-bottom, auto);\n        left: var(--close-left, auto);\n        margin: var(--close-margin, 0 0 var(--content-spacing)) 0;\n      }\n      :host([open]) > section > div > #close.close-btn {\n        background-color: var(--close-btn-background-color, var(--color-secondary, var(--background-color)));\n        border-radius: 50%;\n        border: 0;\n        box-sizing: border-box;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 14px;\n        padding: 1.5em;\n        width: 14px;\n        position: absolute;\n        top: 1em;\n        right: 1em;\n        z-index: 2;\n      }\n      :host([open]) > section > div > #close.close-btn span {\n        height: 14px;\n        width: 14px;\n      }\n      @media only screen and (max-width: _max-width_) {\n        :host([no-mobile]) {\n          display: none;\n        }\n        :host([open]) > section {\n          padding: var(--padding-mobile, var(--padding, min(var(--content-spacing-mobile, var(--content-spacing)), 4vw)));\n        }\n        :host([open]) > section > div > #close {\n          margin: var(--close-margin-mobile, var(--close-margin, 0 0 var(--content-spacing-mobile, var(--content-spacing)) 0));\n        }\n      }\n    ","modal-default-"===this.getAttribute("namespace"))return this.fetchCSS([{path:"".concat(importMeta.url.replace(/(.*\/)(.*)$/,"$1"),"./default-/default-.css"),namespace:!1}],!1)}renderHTML(){this.initialContent=document.createElement("div"),Array.from(this.root.children).forEach((node=>"close"===node.id?(this.appendChild(this.closeBtn=node),this.closeBtn.innerHTML||(this.closeBtn.innerHTML='\n            <span>\n              <svg id="Untitled-Seite%201" viewBox="0 0 14 14" style="background-color:#ffffff00" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" width="14px" height="14px">\n                <path d="M 5.9689 7.7071 L 7.7071 5.9689 L 12.5416 10.8034 L 10.8033 12.5416 L 5.9689 7.7071 Z" fill="#FFFFFF"/>\n                <path d="M 5.9033 5.9689 L 7.6415 7.7071 L 2.807 12.5416 L 1.0688 10.8034 L 5.9033 5.9689 Z" fill="#FFFFFF"/>\n                <path d="M 7.6415 5.9034 L 5.9033 7.6416 L 1.0688 2.8071 L 2.807 1.0689 L 7.6415 5.9034 Z" fill="#FFFFFF"/>\n                <path d="M 7.707 7.6416 L 5.9689 5.9033 L 10.8033 1.0689 L 12.5416 2.8071 L 7.707 7.6416 Z" fill="#FFFFFF"/>\n              </svg>\n            </span>\n          ',this.closeBtn.setAttribute("aria-label","Close"),this.closeBtn.classList.add("close-btn")),!1):!node.getAttribute("slot")&&"STYLE"!==node.nodeName&&void this.initialContent.appendChild(node))),this.section=document.createElement("section"),this.section.appendChild(this.container=document.createElement("div")),this.html=this.section}checkMedia(){var media=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("media");return(self.matchMedia("(max-width: ".concat(this.mobileBreakpoint,")")).matches?"mobile":"desktop")===media}get style(){return this._style||(this._style=((style=document.createElement("style")).setAttribute("protected","true"),style));var style}}}}]);